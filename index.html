<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>💰 بانک مونوپولی</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a1a2f;           /* سرمه‌ای تیره */
  --panel: #102c4a;        /* تیره‌تر برای کارت‌ها */
  --text: #ffffff;
  --button-bg: #ffffff;
  --button-text: #0a1a2f;
  --accent: #00aaff;
  font-family: 'Vazirmatn', sans-serif;
}
* {
  box-sizing: border-box;
}
body {
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 0;
  user-select: none;
}
h1, h2, h3 {
  text-align: center;
}
section {
  display: none;
  padding: 20px;
}
section.active { display: block; }

button {
  background: var(--button-bg);
  color: var(--button-text);
  border: none;
  border-radius: 40px;
  font-size: 17px;
  padding: 12px 20px;
  margin: 12px auto;
  display: block;
  cursor: pointer;
  width: 80%;
  font-family: 'Vazirmatn';
  box-shadow: 0 2px 6px #00000050;
  transition: 0.2s;
}
button:hover {
  background: var(--accent);
  color: var(--text);
}

input, select {
  width: 80%;
  display: block;
  margin: 8px auto;
  background: var(--panel);
  border: none;
  border-radius: 40px;
  padding: 10px;
  color: var(--text);
  text-align: center;
  font-size: 16px;
  font-family: 'Vazirmatn';
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
  background: var(--panel);
  border-radius: 10px;
}
th, td {
  padding: 10px;
  text-align: center;
  border-bottom: 1px solid #1c3e61;
}
tr:last-child td { border-bottom: none; }
tr.bankrupt td { color: #ff6060; }

.popup {
  position: fixed;
  inset: 0;
  background: #000000aa;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 11;
}
.popup.active { display: flex; }

.popup-box {
  background: var(--panel);
  border-radius: 20px;
  padding: 20px;
  width: 90%;
  max-width: 400px;
  color: var(--text);
  text-align: center;
  box-shadow: 0 0 10px #00aaff40;
}
.circle {
  width: 90px; height: 90px;
  border-radius: 50%;
  background: var(--accent);
  line-height: 90px;
  margin: 15px auto;
  color: #fff;
  font-family: 'Vazirmatn';
}
.keyboard {display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px;}
.keyboard button{
  padding:14px;
  font-size:18px;
  border-radius:50%;
  background:#fff;
  color:var(--button-text);
}

.fade {
  position: fixed;
  inset: 0;
  background: #000000cc;
  color: #fff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 999;
  opacity: 0;
  animation: fade 1s;
}
@keyframes fade{
  0%{opacity:0}
  20%{opacity:1}
  80%{opacity:1}
  100%{opacity:0}
}
.arrow {
  width: 40px; height: 40px;
  border-top: 4px solid #fff;
  border-right: 4px solid #fff;
  transform: rotate(45deg);
  margin: 10px;
  animation: arrowmove 1s infinite;
}
@keyframes arrowmove {
  0% { transform: translateX(-50px) rotate(45deg); opacity:0; }
  50% { opacity:1; }
  100% { transform: translateX(50px) rotate(45deg); opacity:0; }
}
</style>
</head>
<body>

<!----------- مرحله تنظیمات ----------->
<section id="pageStart" class="active">
  <h1>💰 بانک مونوپولی</h1>
  <div class="form">
    <label>تعداد بازیکنان:</label>
    <select id="playerCount">
      <option value="2">۲</option>
      <option value="3">۳</option>
      <option value="4">۴</option>
      <option value="5">۵</option>
      <option value="6">۶</option>
    </select>

    <label>موجودی اولیه هر بازیکن:</label>
    <input type="number" id="startMoney" placeholder="مثلاً ۱۵۰۰۰">

    <label>پاداش دور کامل:</label>
    <input type="number" id="turnBonus" placeholder="مثلاً ۲۰۰۰">

    <button id="toNames">ادامه ▶️</button>
  </div>
</section>

<!----------- مرحله ورود نام ----------->
<section id="pageNames">
  <h2>نام بازیکنان</h2>
  <div id="nameContainer"></div>
  <button id="toGame">شروع بازی 🎯</button>
</section>

<!----------- صفحه بازی ----------->
<section id="pageGame">
  <h2>صفحه بازی</h2>
  <button id="cardTransfer">💳 کارت به کارت</button>
  <button id="bonusBtn">🎁 دریافت پاداش دور</button>
  <button disabled>💵 پرداخت/دریافت از بانک (درحال ساخت)</button>
  <button disabled>🏠 رهن بانک (درحال ساخت)</button>
  
  <table id="tablePlayers">
    <thead><tr><th>شماره</th><th>نام بازیکن</th><th>موجودی</th></tr></thead>
    <tbody></tbody>
  </table>

  <button id="resetGame">🔄 اتمام بازی</button>
</section>

<!----------- انیمیشن انتقال ----------->
<div id="fadeAnim" class="fade" style="display:none;">
  <div>
    <div id="giverName"></div>
    <div class="arrow"></div>
    <div id="receiverName"></div>
  </div>
</div>

<script>
let stepStart=document.getElementById("pageStart");
let stepNames=document.getElementById("pageNames");
let stepGame=document.getElementById("pageGame");

document.getElementById("toNames").onclick = () => {
  const count=parseInt(document.getElementById("playerCount").value);
  const startMoney=document.getElementById("startMoney").value;
  const bonus=document.getElementById("turnBonus").value;
  if(!startMoney || !bonus){ alert("مقادیر پولی را وارد کنید"); return;}
  localStorage.setItem("count", count);
  localStorage.setItem("startMoney", startMoney);
  localStorage.setItem("bonus", bonus);
  stepStart.classList.remove("active");
  stepNames.classList.add("active");
  const nameContainer=document.getElementById("nameContainer");
  nameContainer.innerHTML="";
  for(let i=1;i<=count;i++){
    nameContainer.innerHTML+=`<input placeholder="نام بازیکن ${i}" id="p${i}">`;
  }
};

document.getElementById("toGame").onclick = ()=>{
  const count=parseInt(localStorage.getItem("count"));
  let startMoney=parseInt(localStorage.getItem("startMoney"));
  let players=[];
  for(let i=1;i<=count;i++){
    const name=document.getElementById("p"+i).value;
    if(!name){alert("همه نام‌ها را وارد کنید");return;}
    players.push({id:i,name:name,balance:startMoney});
  }
  localStorage.setItem("players", JSON.stringify(players));
  renderTable();
  stepNames.classList.remove("active");
  stepGame.classList.add("active");
};

function renderTable(){
  const tbody=document.querySelector("#tablePlayers tbody");
  tbody.innerHTML="";
  let players=JSON.parse(localStorage.getItem("players"));
  players.forEach(p=>{
    tbody.innerHTML+=`
      <tr><td>${p.id.toLocaleString('fa-IR')}</td>
      <td>${p.name}</td>
      <td>${p.balance.toLocaleString('fa-IR')}</td></tr>`;
  });
}

document.getElementById("resetGame").onclick=()=>{
  if(confirm("بازی ریست شود؟")){
    localStorage.clear(); location.reload();
  }
};
</script>
</body>
</html>
